- id: graphql-phantom-token
  match:
    # Match the original request host/path; Oathkeeper strips /decisions internally
    url: <http|https>://<[^/]+>/graphql<.*>
    methods:
      - GET
      - POST
  # Upstream is unused by Decision API but harmless to keep for documentation.
  upstream:
    url: http://graphql-faker:9002
    preserve_host: true
  authenticators:
    # match the one defined in config.yaml
    - handler: oauth2_introspection
  authorizer:
    handler: allow
  mutators:
    - handler: header
